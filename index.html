<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„é“¾æ¸¸ - æ— ä¾èµ–é’±åŒ…</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, sans-serif;
        }
        body {
            background: #0b0f1a;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .log {
            background: #121a29;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            min-height: 100px;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .btn {
            padding: 10px 16px;
            margin: 6px 0;
            border: none;
            border-radius: 6px;
            background: #4a7dff;
            color: #fff;
            cursor: pointer;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border-radius: 6px;
            border: none;
            background: #1e2530;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>é“¾æ¸¸ - æœ¬åœ°é’±åŒ…</h1>
        <p>çŠ¶æ€ï¼šç¬¬äºŒæ­¥Â·çº¯åŸç”Ÿæ— ä¾èµ–ç‰ˆ</p>

        <button class="btn" onclick="createWallet()">ç”Ÿæˆæ–°é’±åŒ…</button>
        <button class="btn" onclick="showMyMnemonic()">æŸ¥çœ‹æˆ‘çš„åŠ©è®°è¯</button>

        <input id="inputMnemonic" placeholder="ç²˜è´´åŠ©è®°è¯æ¢å¤è´¦å·">
        <button class="btn" onclick="restoreWallet()">æ¢å¤é’±åŒ…</button>

        <h3>è°ƒè¯•æ—¥å¿—</h3>
        <div id="log" class="log">ç­‰å¾…æ“ä½œ...</div>
    </div>

<script>
const logDom = document.getElementById('log');
const STORAGE_KEY = 'game_mnemonic';

// çº¯åŸç”ŸéšæœºåŠ©è®°è¯ï¼ˆæ¸¸æˆä¸“ç”¨ï¼Œæ— å¤–éƒ¨ä¾èµ–ï¼‰
const words = "apple banana cherry date elder fig grape honey ice juice kite lemon mango nut orange pear queen rose sun tomato umbrella van water xmas yellow zebra".split(" ");

function log(text) {
    logDom.innerText = `[${new Date().toLocaleString()}] ${text}\n` + logDom.innerText;
}

// ç”Ÿæˆ12è¯åŠ©è®°è¯
function generateMnemonic() {
    let res = [];
    for(let i=0; i<12; i++) {
        let r = Math.floor(Math.random() * words.length);
        res.push(words[r]);
    }
    return res.join(" ");
}

// ç®€å•æ ¡éªŒæ ¼å¼
function isValidMnemonic(str) {
    let parts = str.trim().split(/\s+/);
    return parts.length === 12;
}

// ç”Ÿæˆé’±åŒ…
function createWallet() {
    try {
        const mnemonic = generateMnemonic();
        localStorage.setItem(STORAGE_KEY, mnemonic);
        log("âœ… æ–°é’±åŒ…å·²ç”Ÿæˆ");
        log("åŠ©è®°è¯ï¼š" + mnemonic);
    } catch (e) {
        log("âŒ ç”Ÿæˆå¤±è´¥ï¼š" + e.message);
    }
}

// æŸ¥çœ‹åŠ©è®°è¯
function showMyMnemonic() {
    const mne = localStorage.getItem(STORAGE_KEY);
    if (!mne) {
        log("âš ï¸ è¿˜æ²¡æœ‰é’±åŒ…ï¼Œè¯·å…ˆç”Ÿæˆ");
        return;
    }
    log("ğŸ“„ å½“å‰åŠ©è®°è¯ï¼š" + mne);
}

// æ¢å¤é’±åŒ…
function restoreWallet() {
    const input = document.getElementById('inputMnemonic').value.trim();
    if (!input) {
        log("âš ï¸ è¯·è¾“å…¥åŠ©è®°è¯");
        return;
    }
    if (!isValidMnemonic(input)) {
        log("âŒ å¿…é¡»æ˜¯12ä¸ªå•è¯");
        return;
    }
    try {
        localStorage.setItem(STORAGE_KEY, input);
        log("âœ… é’±åŒ…æ¢å¤æˆåŠŸ");
    } catch (e) {
        log("âŒ æ¢å¤å¤±è´¥ï¼š" + e.message);
    }
}

window.onload = () => {
    log("æ¸¸æˆåŸºåº§åŠ è½½å®Œæˆ âœ…");
    const has = !!localStorage.getItem(STORAGE_KEY);
    log(has ? "âœ… å·²å­˜åœ¨é’±åŒ…" : "âš ï¸ æœªåˆ›å»ºé’±åŒ…ï¼Œè¯·ç”Ÿæˆ");
};
</script>
</body>
</html>
