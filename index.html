<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„é“¾æ¸¸ - é’±åŒ…ä¿®å¤ç‰ˆ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, sans-serif;
        }
        body {
            background: #0b0f1a;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .log {
            background: #121a29;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            min-height:100px;
            font-size:14px;
            white-space: pre-wrap;
        }
        .btn {
            padding: 10px 16px;
            margin:6px 0;
            border:none;
            border-radius:6px;
            background:#4a7dff;
            color:#fff;
            cursor:pointer;
        }
        input {
            width:100%;
            padding:10px;
            margin:8px 0;
            border-radius:6px;
            border:none;
            background:#1e2530;
            color:#fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>é“¾æ¸¸ - æœ¬åœ°é’±åŒ…</h1>
        <p>çŠ¶æ€ï¼šç¬¬äºŒæ­¥Â·èº«ä»½ç³»ç»Ÿ</p>

        <button class="btn" onclick="createWallet()">ç”Ÿæˆæ–°é’±åŒ…</button>
        <button class="btn" onclick="showMyMnemonic()">æŸ¥çœ‹æˆ‘çš„åŠ©è®°è¯</button>

        <input id="inputMnemonic" placeholder="ç²˜è´´åŠ©è®°è¯æ¢å¤è´¦å·">
        <button class="btn" onclick="restoreWallet()">æ¢å¤é’±åŒ…</button>

        <h3>è°ƒè¯•æ—¥å¿—</h3>
        <div id="log" class="log">ç­‰å¾…æ“ä½œ...</div>
    </div>

    <!-- æ¢ç”¨æ›´ç¨³å®šçš„CDN -->
    <script src="https://cdn.bootcdn.net/ajax/libs/bip39/3.1.0/bip39.min.js"></script>
    <script>
        const logDom = document.getElementById('log');
        const STORAGE_KEY = 'game_mnemonic';

        function log(text) {
            logDom.innerText = `[${new Date().toLocaleString()}] ${text}\n` + logDom.innerText;
        }

        // å…ˆæ£€æŸ¥åº“æœ‰æ²¡æœ‰åŠ è½½æˆåŠŸ
        function checkBip39() {
            if (typeof bip39 === 'undefined') {
                log('âŒ åŠ©è®°è¯åº“åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œååˆ·æ–°');
                return false;
            }
            return true;
        }

        // ç”Ÿæˆé’±åŒ…
        function createWallet() {
            if (!checkBip39()) return;

            try {
                const mnemonic = bip39.generateMnemonic();
                localStorage.setItem(STORAGE_KEY, mnemonic);
                log('âœ… æ–°é’±åŒ…å·²ç”Ÿæˆ');
                log('åŠ©è®°è¯ï¼š' + mnemonic);
            } catch (e) {
                log('âŒ ç”Ÿæˆå¤±è´¥ï¼š' + e.message);
            }
        }

        // æŸ¥çœ‹åŠ©è®°è¯
        function showMyMnemonic() {
            const mne = localStorage.getItem(STORAGE_KEY);
            if (!mne) {
                log('âš ï¸ è¿˜æ²¡æœ‰é’±åŒ…ï¼Œè¯·å…ˆç”Ÿæˆ');
                return;
            }
            log('ğŸ“„ å½“å‰åŠ©è®°è¯ï¼š' + mne);
        }

        // æ¢å¤é’±åŒ…
        function restoreWallet() {
            if (!checkBip39()) return;

            const input = document.getElementById('inputMnemonic').value.trim();
            if (!input) {
                log('âš ï¸ è¯·è¾“å…¥åŠ©è®°è¯');
                return;
            }

            try {
                const valid = bip39.validateMnemonic(input);
                if (!valid) {
                    log('âŒ åŠ©è®°è¯æ ¼å¼ä¸æ­£ç¡®');
                    return;
                }
                localStorage.setItem(STORAGE_KEY, input);
                log('âœ… é’±åŒ…æ¢å¤æˆåŠŸ');
            } catch (e) {
                log('âŒ æ¢å¤å¤±è´¥ï¼š' + e.message);
            }
        }

        window.onload = () => {
            log('æ¸¸æˆåŸºåº§åŠ è½½å®Œæˆ âœ…');
            checkBip39();
            const has = !!localStorage.getItem(STORAGE_KEY);
            log(has ? 'âœ… å·²å­˜åœ¨é’±åŒ…' : 'âš ï¸ æœªåˆ›å»ºé’±åŒ…ï¼Œè¯·ç”Ÿæˆ');
        };
    </script>
</body>
</html>
